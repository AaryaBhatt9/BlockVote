{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bhatt\\\\OneDrive\\\\Documents\\\\BlockVote\\\\client\\\\src\\\\screens\\\\Home.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Vote from \"./Vote\";\nimport Admin from \"./Admin\";\nimport ElectionContract from \"../contracts/Election.json\";\nimport getWeb3 from \"../utils/getWeb3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [role, setRole] = useState(2);\n  const [web3, setWeb3] = useState(null);\n  const [currentAccount, setCurrentAccount] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const loadWeb3 = async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = ElectionContract.networks[networkId];\n      const instance = new web3.eth.Contract(ElectionContract.abi, deployedNetwork && deployedNetwork.address);\n      setWeb3(web3);\n      setCurrentAccount(accounts[0]);\n      setContract(instance);\n      console.log(\"init\");\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  const getRole = async () => {\n    if (contract) {\n      const user = await contract.methods.getRole(currentAccount).call();\n      setRole(parseInt(user));\n      console.log(\"role:\");\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadWeb3();\n  }, []);\n  useEffect(() => {\n    getRole();\n  }, [contract]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      bgcolor: \"background.default\",\n      color: \"text.primary\",\n      height: \"100vh\"\n    },\n    children: loading ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"80vh\"\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Box, {\n      children: [role === 1 && /*#__PURE__*/_jsxDEV(Admin, {\n        role: role,\n        contract: contract,\n        web3: web3,\n        currentAccount: currentAccount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), role === 2 && /*#__PURE__*/_jsxDEV(Vote, {\n        role: role,\n        contract: contract,\n        web3: web3,\n        currentAccount: currentAccount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), role === 3 && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"80vh\"\n        },\n        children: \"Unauthorized User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"SE1W9bEyf961QftwbPUl9pSec30=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useEffect","useState","Box","Vote","Admin","ElectionContract","getWeb3","Home","role","setRole","web3","setWeb3","currentAccount","setCurrentAccount","contract","setContract","loading","setLoading","loadWeb3","accounts","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","console","log","error","getRole","user","methods","call","parseInt","bgcolor","color","height","display","justifyContent","alignItems"],"sources":["C:/Users/bhatt/OneDrive/Documents/BlockVote/client/src/screens/Home.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Vote from \"./Vote\";\nimport Admin from \"./Admin\";\nimport ElectionContract from \"../contracts/Election.json\";\nimport getWeb3 from \"../utils/getWeb3\";\n\nexport default function Home() {\n  const [role, setRole] = useState(2);\n  const [web3, setWeb3] = useState(null);\n  const [currentAccount, setCurrentAccount] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const loadWeb3 = async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = ElectionContract.networks[networkId];\n      const instance = new web3.eth.Contract(\n        ElectionContract.abi,\n        deployedNetwork && deployedNetwork.address\n      );\n      setWeb3(web3);\n      setCurrentAccount(accounts[0]);\n      setContract(instance);\n      console.log(\"init\");\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n\n  const getRole = async () => {\n    if (contract) {\n      const user = await contract.methods.getRole(currentAccount).call();\n      setRole(parseInt(user));\n      console.log(\"role:\");\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadWeb3();\n  }, []);\n\n  useEffect(() => {\n    getRole();\n  }, [contract]);\n\n  return (\n    <Box\n      sx={{\n        bgcolor: \"background.default\",\n        color: \"text.primary\",\n        height: \"100vh\",\n      }}\n    >\n      {loading ? (\n        <Box\n          sx={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            height: \"80vh\",\n          }}\n        >\n          Loading...\n        </Box>\n      ) : (\n        <Box>\n          {role === 1 && (\n            <Admin\n              role={role}\n              contract={contract}\n              web3={web3}\n              currentAccount={currentAccount}\n            />\n          )}\n\n          {role === 2 && (\n            <Vote\n              role={role}\n              contract={contract}\n              web3={web3}\n              currentAccount={currentAccount}\n            />\n          )}\n\n          {role === 3 && (\n            <Box\n              sx={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                height: \"80vh\",\n              }}\n            >\n              Unauthorized User\n            </Box>\n          )}\n        </Box>\n      )}\n    </Box>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}